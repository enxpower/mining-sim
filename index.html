<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Off-Grid Mining Microgrid · V2.4_geo · Fuel-Saving Baseline (Stabilized r2)</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
  :root{--fg:#111;--muted:#666;--box:#d1d5db;--primary:#111;--bg:#fff;--btnbg:#fff;--btnbd:#111;--btnhover:#0a0a0a10}
  *{box-sizing:border-box}
  body{font-family:system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,"Noto Sans",sans-serif;color:var(--fg);margin:14px;background:var(--bg)}
  h1{font-size:18px;margin:0 0 8px}
  .row{display:flex;flex-wrap:wrap;gap:12px;margin:10px 0}
  .card{border:1px solid var(--box);border-radius:10px;padding:12px;background:#fff;flex:1 1 320px}
  label{display:block;font-size:12px;margin:6px 0 3px}
  input[type=number],input[type=range],select{width:100%;padding:7px 9px;border:1px solid #cbd5e1;border-radius:8px}
  input[type=range]{height:32px;padding:0}
  .btn{min-width:108px;height:38px;padding:0 14px;border:1.5px solid var(--btnbd);border-radius:10px;background:var(--btnbg);
       cursor:pointer;display:inline-flex;align-items:center;justify-content:center;gap:8px;font-weight:600;transition:.15s ease;user-select:none}
  .btn:hover{background:var(--btnhover)}
  .btn:active{transform:translateY(1px);}
  .btn.secondary{border-color:#6b7280;color:#333}
  .kv{font-family:ui-monospace,Menlo,Consolas,monospace}
  canvas{width:100%;height:280px;background:#fff;border:1px solid #eee;border-radius:10px;display:block}
  .stack{position:relative}
  .overlay{position:absolute;inset:8px;display:flex;align-items:center;justify-content:center;background:repeating-linear-gradient(45deg,#f9fafb,#f9fafb 10px,#f3f4f6 10px,#f3f4f6 20px);border:1px dashed #e5e7eb;border-radius:10px;color:#6b7280;font-size:14px;letter-spacing:.2px}
  .overlay .pill{background:#fff;border:1px solid #e5e7eb;border-radius:999px;padding:6px 10px;display:flex;align-items:center;gap:8px}
  .legend{position:absolute; right:14px; top:10px; background:rgba(255,255,255,0.92); border:1px solid #e5e7eb; border-radius:8px; padding:6px 8px; font-size:12px}
  .legend-row{display:flex;align-items:center;gap:6px;margin:2px 0}
  .swatch{width:16px;height:3px;background:#000}
  .dash{background:linear-gradient(90deg,#000 0 40%,transparent 40% 60%,#000 60% 100%)}
  .dash2{background:linear-gradient(90deg,#000 0 30%,transparent 30% 55%,#000 55% 100%)}
  .kpi{display:flex;gap:10px;flex-wrap:wrap}
  .kpi .box{border:1px solid var(--box);border-radius:10px;padding:8px 10px;min-width:150px;background:#fff}
  .kpi .box b{display:block;font-size:12px;color:#374151}
  .kpi .box span{display:block;font-size:18px;margin-top:2px}
  #log{font-family:ui-monospace,Menlo,Consolas,monospace;font-size:12px;max-height:180px;overflow:auto;border:1px solid #eee;border-radius:8px;padding:8px;background:#fafafa;white-space:pre-wrap;line-height:1.35}
  footer{margin-top:14px;padding:14px;border-top:1px dashed #e5e7eb;color:#6b7280;font-size:13px;display:flex;gap:14px;flex-wrap:wrap;align-items:center;justify-content:space-between}
  footer .social-icons{display:flex;gap:12px}
  footer .social-icons a{color:#374151}
  .topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}
  .langbtn{font-size:12px;border:1px solid #ddd;border-radius:8px;padding:6px 10px;background:#fff;cursor:pointer}
  #live{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-height:1.5em}
  .muted{opacity:.5}
</style>
</head>
<body>
<div class="topbar">
  <h1><span data-i18n="title">Off-Grid Mining Microgrid — 35 kV</span> · <span class="kv">V2.4_geo</span></h1>
  <button id="langBtn" class="langbtn">EN | 中文</button>
</div>

<!-- Global & Geo (保持不变的表单区) -->
<!-- 下面 DOM 结构与名称完全与原样一致（略）。为了篇幅，这里不再重复你已有的 HTML 表单；直接按你给的完整样例粘贴。 -->
<!-- ……请把你样例中的所有表单卡片块粘贴在这里（与原样一致） …… -->

<!-- 图表区：与原样一致 -->
<!-- ……同样粘贴你样例中的两个图表卡片与 KPI & Log，与原样一致 …… -->

<footer>
  <div>© 2025 Energize Solutions Inc. – All rights reserved.</div>
  <div>Powered by GitHub Pages | Contact: <a href="mailto:info@energizeos.com">info@energizeos.com</a></div>
  <div class="social-icons">
    <a href="https://www.linkedin.com/in/gongtiejing" target="_blank" aria-label="LinkedIn"><i class="fab fa-linkedin fa-lg"></i></a>
    <a href="https://github.com/enxpower" target="_blank" aria-label="GitHub"><i class="fab fa-github fa-lg"></i></a>
  </div>
</footer>

<!-- 先加载“从私库同步”的引擎，再加载 UI 逻辑 -->
<script src="modules/core.js"></script>
<script src="app.js"></script>
</body>
</html>
